# This file specifies the source locations of pretrained models, and what
# the target locations to which they should be downloaded.
#
# The model source can be from either NGC (for internal nvidia + external customer use)
# or from SwiftStack (aka PBSS) for internal nvidia use.
#
# The download_models.py script requires the download directory be specified, but there
# are two extra parameters here that can further specify what to do with the downloaded file.
# "symlink" is used to specify if any symlinking operation needs to happen after download.
# "relative_download_dir" is used to specify the subdirectory to which the files should
# be downloaded.
# "extra_args" specifies any extra arguments that should be passed the ngc download or
# s3 download commands.
#
# All models with an `ngc` path are publically available. Those with only a `pbss` path
# are currently in internal NVIDIA development.

models:
    esm1nv:
        ngc: "nvidia/clara/esm1nv:1.0"
        pbss: "s3://bionemo-ci/models/esm1nv.nemo"
        symlink:
            source: "../../esm1nv.nemo"
            target: "protein/esm1nv/esm1nv.nemo"
    prott5nv:
        ngc: "nvidia/clara/prott5nv:1.0"
        pbss: "s3://bionemo-ci/models/prott5nv.nemo"
        symlink:
            source: "../../prott5nv.nemo"
            target: "protein/prott5nv/prott5nv.nemo"
    megamolbart:
        ngc: "nvidia/clara/megamolbart:1.0"
        pbss: "s3://bionemo-ci/models/megamolbart.nemo"
        symlink:
            source: "../../megamolbart.nemo"
            target: "molecule/megamolbart/megamolbart.nemo"
    molmim_70m_24_3:
        # https://wandb.ai/clara-discovery/molmim_convergence_prod_March2024/runs/cOLZ4Eme
        ngc: "nvidia/clara/molmim:1.3"
        pbss: "s3://bionemo-ci/models/molmim_70m_24_3.nemo"
        symlink:
            source: "../../molmim_70m_24_3.nemo"
            target: "molecule/molmim/molmim_70m_24_3.nemo"
    equidock_dips:
        ngc: "nvidia/clara/equidock_dips:1.1"
        pbss: "s3://bionemo-ci/models/equidock_dips.nemo"
        symlink:
            source: "../../equidock_dips.nemo"
            target: "protein/equidock/equidock_dips.nemo"
    equidock_db5:
        ngc: "nvidia/clara/equidock_db5:1.1"
        pbss: "s3://bionemo-ci/models/equidock_db5.nemo"
        symlink:
            source: "../../equidock_db5.nemo"
            target: "protein/equidock/equidock_db5.nemo"
    diffdock_score:
        ngc: "nvidia/clara/diffdock_score:1.5"
        pbss: "s3://bionemo-ci/models/diffdock_score.nemo"
        symlink:
            source: "../../diffdock_score.nemo"
            target: "molecule/diffdock/diffdock_score.nemo"
    diffdock_confidence:
        ngc: "nvidia/clara/diffdock_confidence:1.5"
        pbss: "s3://bionemo-ci/models/diffdock_confidence.nemo"
        symlink:
            source: "../../diffdock_confidence.nemo"
            target: "molecule/diffdock/diffdock_confidence.nemo"
    esm2nv_8m_untrained:
        ngc: null
        pbss: "s3://bionemo-ci/models/esm2nv_8M_untrained.nemo"
        symlink:
            source: "../../esm2nv_8M_untrained.nemo"
            target: "protein/esm2nv/esm2nv_8M_untrained.nemo"
    esm2nv_8m_lora:
        ngc: null
        pbss: "s3://bionemo-ci/models/esm2nv_sec_str_lora.nemo"
        symlink:
            source: "../../esm2nv_sec_str_lora.nemo"
            target: "protein/esm2nv/esm2nv_sec_str_lora.nemo"
    esm2nv_650m:
        #TODO: update path when model is released
        ngc: "nvidia/clara/esm2nv650m:1.0"
        pbss: "s3://bionemo-ci/models/esm2nv_650M_converted.nemo"
        symlink:
            source: "../../esm2nv_650M_converted.nemo"
            target: "protein/esm2nv/esm2nv_650M_converted.nemo"
    esm2nv_3b:
        #TODO: update path when model is released
        ngc: "nvidia/clara/esm2nv3b:1.0"
        pbss: "s3://bionemo-ci/models/esm2nv_3B_converted.nemo"
        symlink:
            source: "../../esm2nv_3B_converted.nemo"
            target: "protein/esm2nv/esm2nv_3B_converted.nemo"
    openfold_initial_training_public:
        pbss: "s3://bionemo-ci/models/openfold_initial_training_public_checkpoint.nemo"
        symlink:
            source: "../../openfold_initial_training_public_checkpoint.nemo"
            target: "protein/openfold/openfold_initial_training_public_checkpoint.nemo"
    openfold_finetuning_4_public:
        pbss: "s3://bionemo-ci/models/openfold_finetuning_4_public_checkpoint.nemo"
        symlink:
            source: "../../openfold_finetuning_4_public_checkpoint.nemo"
            target: "protein/openfold/openfold_finetuning_4_public_checkpoint.nemo"
    openfold_initial_training_inhouse:
        pbss: "s3://bionemo-ci/models/openfold_initial_training_inhouse_checkpoint.nemo"
        symlink:
            source: "../../openfold_initial_training_inhouse_checkpoint.nemo"
            target: "protein/openfold/openfold_initial_training_inhouse_checkpoint.nemo"
    openfold_finetuning_inhouse:
        pbss: "s3://bionemo-ci/models/openfold_finetuning_inhouse_checkpoint.nemo"
        symlink:
            source: "../../openfold_finetuning_inhouse_checkpoint.nemo"
            target: "protein/openfold/openfold_finetuning_inhouse_checkpoint.nemo"
    esm2_650m_huggingface:
        pbss: "s3://bionemo-ci/models/esm2-650M-huggingface"
        relative_download_dir: "protein/esm2nv/esm2-650M-huggingface"
        # Hugging face models are multiple files in a directory, so the recursive
        # flag is used to download everything in the dir.
        extra_args: "--recursive"
    esm2_3b_huggingface:
        pbss: "s3://bionemo-ci/models/esm2-3B-huggingface"
        relative_download_dir: "protein/esm2nv/esm2-3B-huggingface"
        # Hugging face models are multiple files in a directory, so the recursive
        # flag is used to download everything in the dir.
        extra_args: "--recursive"
    dnabert:
        pbss: "s3://bionemo-ci/models/dnabert-86M.nemo"
        symlink:
            source: "../../dnabert-86M.nemo"
            target: "dna/dnabert/dnabert-86M.nemo"
    geneformer_10M_240530:
        # A pretrained 10.3M parameter geneformer (BERT) on 23M unique single cells and 25429 ENSG based tokens,
        #   padded to a final shape of 25472 for GPU efficiency.
        # See https://wandb.ai/clara-discovery/scFM_v9/runs/4ij9ghox
        ngc: "nvidia/clara/geneformer_10m:1.6"
        pbss: "s3://bionemo-ci/models/geneformer-10M-240530-step-115430-wandb-4ij9ghox.nemo"
        symlink:
            source: "../../geneformer-10M-240530-step-115430-wandb-4ij9ghox.nemo"
            target: "singlecell/geneformer/geneformer-10M-240530.nemo"
        md5sum: 375ebb9431419f4936fa3aa2bce6e7d6 # pragma: allowlist secret
    geneformer_106M_240530:
        # A pretrained 106M parameter geneformer (BERT) on 23M unique single cells and 25429 ENSG based tokens,
        #   padded to a final shape of 25472 for GPU efficiency.
        # See https://wandb.ai/clara-discovery/scFM_v9/runs/KZxWJ0I5
        ngc: "nvidia/clara/geneformer_100m:1.6"
        pbss: "s3://bionemo-ci/models/geneformer-106M-240530-step-115430-wandb-KZxWJ0I5.nemo"
        symlink:
            source: "../../geneformer-106M-240530-step-115430-wandb-KZxWJ0I5.nemo"
            target: "singlecell/geneformer/geneformer-106M-240530.nemo"
        md5sum: 375ebb9431419f4936fa3aa2bce6e7d6 #pragma: allowlist secret
    geneformer:
        # A QA model for geneformer with randomly initialized weights.
        pbss: "s3://bionemo-ci/models/geneformer-qa.nemo"
        symlink:
            source: "../../geneformer-qa.nemo"
            target: "singlecell/geneformer/geneformer-qa.nemo"
    enformer_finetuned16:
        pbss: "s3://bionemo-ci/models/dna/enformer/enformer_finetuned16/0.1.0/enformer_finetuned16.nemo"
        symlink:
            source: "../../enformer_finetuned16.nemo"
            target: "dna/enformer/enformer_finetuned16.nemo"
    enformer_finetuned32:
        pbss: "s3://bionemo-ci/models/dna/enformer/enformer_finetuned32/0.1.0/enformer_finetuned32.nemo"
        symlink:
            source: "../../enformer_finetuned32.nemo"
            target: "dna/enformer/enformer_finetuned32.nemo"
    enformer_pretrained16:
        pbss: "s3://bionemo-ci/models/dna/enformer/enformer_pretrained16/0.1.0/enformer_pretrained16.nemo"
        symlink:
            source: "../../enformer_pretrained16.nemo"
            target: "dna/enformer/enformer_pretrained16.nemo"
    enformer_pretrained32:
        pbss: "s3://bionemo-ci/models/dna/enformer/enformer_pretrained32/0.1.0/enformer_pretrained32.nemo"
        relative_download_dir: "dna/enformer/"
        symlink:
            source: "../../enformer_pretrained32.nemo"
            target: "dna/enformer/enformer_pretrained32.nemo"
    dsmbind:
        ngc: null
        pbss: "s3://bionemo-ci/models/dsmbind.pth"
        symlink:
            source: "../../dsmbind.pth"
            target: "molecule/dsmbind/dsmbind.pth"
data:
    openfold_sample:
        pbss: "s3://bionemo-ci/test-data/openfold/openfold_vprocessed_sample/openfold_sample_data.tar.gz"
        relative_download_dir: "examples/tests/test_data/"
    openfold_training:
        pbss: "s3://bionemo-ci/test-data/openfold/openfold_vprocessed_sample_cif_pt/openfold_training_samples.tar.gz"
        relative_download_dir: "examples/tests/test_data/"
        untar_dir: "openfold_data"
    single_cell:
        pbss: "s3://bionemo-ci/test-data/singlecell/singlecell-testdata-20240506.tar.gz"
        relative_download_dir: "examples/tests/test_data/"
        md5sum: dd6b0d791bf2b3301d9793a1d6663c75 #pragma: allowlist secret
    diffdock_sample:
        pbss: "s3://bionemo-ci/test-data/diffdock/diffdock_vprocessed_sample_05022024/"
        relative_download_dir: "examples/tests/test_data/molecule/diffdock"
        extra_args: "--recursive"
    diffdock_test:
        pbss: "s3://bionemo-ci/test-data/diffdock/diffdock_vpreprocessing_test_05022024/"
        relative_download_dir: "examples/tests/test_data/molecule/diffdock"
        extra_args: "--recursive"
    diffdick_cugraph:
        pbss: "s3://bionemo-ci/test-data/diffdock/diffdock_vmodel_io_03042024_cugraph/"
        relative_download_dir: "examples/tests/test_data/molecule/diffdock"
        extra_args: "--recursive"
